{"title":"ISP Links Short","description":"Global visibility of all interfaces whose alias matches isp* — bandwidth, utilization, top talkers, and errors/discards.","widgets":[{"id":1,"definition":{"title":"Global In bps","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:snmp.ifHCInOctets{interface_alias:isp*}.as_rate()"}],"formulas":[{"formula":"reduce((percentile(query1, 'p95', { * }) * 8), 'avg')"}]}],"autoscale":true,"precision":0}},{"id":2,"definition":{"title":"Global Out bps","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifHCOutOctets{interface_alias:isp*}","aggregator":"avg"}],"formulas":[{"formula":"(throughput(query1) * 8)"}]}],"autoscale":true,"precision":0}},{"id":4,"definition":{"title":"Top 10 Interfaces by Total bps (last)","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifHCInOctets{interface_alias:isp*} by {snmp_host}","aggregator":"sum"},{"data_source":"metrics","name":"query2","query":"sum:snmp.ifHCOutOctets{interface_alias:isp*} by {snmp_host}","aggregator":"sum"}],"formulas":[{"formula":"((query1 * 8) + (query2 * 8))"}],"sort":{"count":25,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{}}},{"id":5,"definition":{"title":"Utilization % by Interface","title_size":"16","title_align":"left","show_legend":false,"type":"heatmap","requests":[{"style":{"palette":"orange"},"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifHCInOctets{interface_alias:isp*} by {device,interface}"},{"data_source":"metrics","name":"query2","query":"sum:snmp.ifHCOutOctets{interface_alias:isp*} by {device,interface}"},{"data_source":"metrics","name":"query3","query":"sum:snmp.ifHighSpeed{interface_alias:isp*} by {device,interface}"}],"formulas":[{"formula":"100 * ((throughput(query1) * 8) + (throughput(query2) * 8)) / (query3 * 1000000)"}]}]}},{"id":6,"definition":{"title":"Errors & Discards (per interface)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifInErrors{interface_alias:isp*} by {snmp_device,interface_alias}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"thin"},"display_type":"line"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifOutErrors{interface_alias:isp*} by {snmp_device,interface_alias}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"red","line_type":"solid","line_width":"thin"},"display_type":"line"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifInDiscards{interface_alias:isp*} by {snmp_device,interface_alias}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"thin"},"display_type":"line"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifOutDiscards{interface_alias:isp*} by {snmp_device,interface_alias}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"thin"},"display_type":"area"}]}},{"id":3,"definition":{"title":"All ISP Links – Bandwidth (bps)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifHCInOctets{interface_alias:isp*}.as_rate()"}],"formulas":[{"alias":"In bps","formula":"(percentile(query1, 'p95', { * }) * 8)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"thin"},"display_type":"area"},{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:snmp.ifHCOutOctets{interface_alias:isp*}.as_rate()"}],"formulas":[{"alias":"Out bps","formula":"(percentile(query1, 'p95', { * }) * 8)"}],"style":{"palette":"cool","line_type":"solid","line_width":"thin"},"display_type":"area"}],"yaxis":{"scale":"linear"}}}],"template_variables":[{"name":"alias","prefix":"interface_alias","available_values":[],"default":"isp*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"auto","pause_auto_refresh":false}