{"title":"Tenant_Top_Logs","description":"","widgets":[{"id":829739037537380,"definition":{"title":"Logs by Severity for $labels.NETWORK.value ONLY ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Message","style":{"palette":"warm"},"formula":"query3"}],"queries":[{"name":"query3","data_source":"logs","search":{"query":"@labels.NETWORK:$labels.NETWORK.value NOT \"ipset\" NOT service:p81zero"},"indexes":["*"],"group_by":[{"facet":"status","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"bars"}]},"layout":{"x":0,"y":0,"width":6,"height":5}},{"id":3048641578384283,"definition":{"title":"Top Logs by Message  $labels.NETWORK.value & $tenant.Id","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"NTC ERROR","style":{"palette":"purple"},"formula":"b"},{"alias":"SDP WARN | ERROR","style":{"palette":"orange"},"formula":"c"},{"alias":"GUARD ERROR","style":{"palette":"blue"},"formula":"query3"},{"alias":"ZOMBIE REPORTED","style":{"palette":"grey"},"formula":"query4"},{"alias":"OTHER SERVICES LOGS","formula":"query5"}],"queries":[{"name":"b","data_source":"logs","search":{"query":"status:error @labels.NETWORK:$labels.NETWORK.value service:ntc NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"message","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"c","data_source":"logs","search":{"query":"service:perimeter81-sdp-controller @tenantId:$tenantId.value status:(warn OR error)"},"indexes":["*"],"group_by":[{"facet":"message","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query3","data_source":"logs","search":{"query":"service:guard @labels.NETWORK:$labels.NETWORK.value"},"indexes":["*"],"group_by":[{"facet":"message","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query4","data_source":"logs","search":{"query":"@tenantId:$tenantId.value service:zombie-cleanup-lambda-production"},"indexes":["*"],"group_by":[{"facet":"message","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query5","data_source":"logs","search":{"query":"@tenantId:$tenantId.value"},"indexes":["*"],"group_by":[{"facet":"message","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{},"display_type":"bars"}],"custom_links":[{"override_label":"logs","link":"/logs?live=false&from_ts={{timestamp_start}}&to_ts={{timestamp_end}}&query={{tags}}&customer={{$tenantId}}","is_hidden":false}]},"layout":{"x":6,"y":0,"width":6,"height":5}},{"id":2542239514317496,"definition":{"title":"Recent Jobs For $tenantId.value","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"events_query_1"}],"queries":[{"name":"events_query_1","data_source":"logs","search":{"query":"service:saferx-backend env:production @tenant:$tenantId.value"},"indexes":["*"],"group_by":[{"facet":"@job","limit":10,"sort":{"aggregation":"cardinality","order":"desc","metric":"status"},"should_exclude_missing":true},{"facet":"@call","limit":10,"sort":{"aggregation":"cardinality","order":"desc","metric":"status"},"should_exclude_missing":true},{"facet":"status","limit":10,"sort":{"aggregation":"cardinality","order":"desc","metric":"status"},"should_exclude_missing":true}],"compute":{"aggregation":"cardinality","metric":"status"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"tags","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":0,"y":5,"width":6,"height":5}},{"id":5415713358979590,"definition":{"title":"User Errors For $tenantId.value","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"logs","search":{"query":"container_name:sdp-controller-production (@labels.NETWORK:$labels.NETWORK.value OR @tenantId:$tenantId.value OR @tenant:$tenantId.value) AND (status:error OR status:warn)"},"indexes":["*"],"group_by":[{"facet":"@userId","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":5,"width":6,"height":5}},{"id":3602058410200387,"definition":{"title":"Gateway Not Ready Error ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"alias":"GW NOT READY","formula":"events_query_1"},{"alias":"NETWORK FAILED","formula":"query1"}],"queries":[{"name":"events_query_1","data_source":"logs","search":{"query":"service:perimeter81-sdp-controller status:warn ERR_GATEWAY_NOT_READY $tenantId"},"indexes":["*"],"group_by":[{"facet":"@gatewayId","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query1","data_source":"logs","search":{"query":"service:saferx-handler \"failed state\" $tenantId"},"indexes":["*"],"group_by":{"fields":["@networkId"],"limit":10,"sort":{"aggregation":"count","metric":"count","order":"desc"},"should_exclude_missing":true},"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":0,"y":10,"width":6,"height":5}},{"id":5380538645813236,"definition":{"title":"Top Service Logs  $labels.NETWORK.value ONLY ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Service","formula":"b"}],"queries":[{"name":"b","data_source":"logs","search":{"query":"@labels.NETWORK:$labels.NETWORK.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"service","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values"},"display_type":"bars"}]},"layout":{"x":6,"y":10,"width":6,"height":5}},{"id":1415027767098418,"definition":{"title":"Top Logs by Service  by Gateway ID & Service & $tenant.Id","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Network_ID","formula":"query3"},{"alias":"Tenant_ID","formula":"query5"}],"queries":[{"name":"query3","data_source":"logs","search":{"query":"@labels.NETWORK:$labels.NETWORK.value NOT \"ipset\""},"indexes":["*"],"group_by":{"fields":["@labels.INSTANCE"],"limit":50,"sort":{"aggregation":"count","metric":"count","order":"desc"},"should_exclude_missing":true},"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query5","data_source":"logs","search":{"query":"@tenantId:$tenantId.value NOT \"ipset\""},"indexes":["*"],"group_by":{"fields":["@labels.INSTANCE"],"limit":50,"sort":{"aggregation":"count","metric":"count","order":"desc"},"should_exclude_missing":true},"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"bars"}]},"layout":{"x":0,"y":15,"width":12,"height":5}},{"id":7752569508994462,"definition":{"title":"% Change by  $labels.NETWORK.value & $tenant.Id","title_size":"16","title_align":"left","type":"change","requests":[{"increase_good":true,"order_by":"change","change_type":"relative","order_dir":"desc","response_format":"scalar","formulas":[{"formula":"month_before(query5)"},{"formula":"query5","alias":"Tenant_ID"}],"queries":[{"name":"query5","data_source":"logs","search":{"query":"@tenantId:$tenantId.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"service","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query3","data_source":"logs","search":{"query":"@labels.NETWORK:$labels.NETWORK.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"service","limit":25,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"show_present":true}]},"layout":{"x":0,"y":20,"width":6,"height":5}},{"id":1725066827150790,"definition":{"title":"%Change  by Gateway ID & Service & $tenant.Id","title_size":"16","title_align":"left","type":"change","requests":[{"increase_good":true,"order_by":"present","change_type":"relative","order_dir":"asc","response_format":"scalar","formulas":[{"formula":"day_before(query3)"},{"formula":"query3","alias":"Network_ID"}],"queries":[{"name":"query3","data_source":"logs","search":{"query":"@labels.NETWORK:$labels.NETWORK.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"@labels.INSTANCE","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query5","data_source":"logs","search":{"query":"@tenantId:$tenantId.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"@labels.INSTANCE","limit":10,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"show_present":true}]},"layout":{"x":6,"y":20,"width":6,"height":5}},{"id":8468915465727718,"definition":{"title":"Top Logs by Service  $labels.NETWORK.value & $tenantId","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Network_ID","formula":"query3"},{"alias":"Tenant_ID","formula":"query5"}],"queries":[{"name":"query3","data_source":"logs","search":{"query":"@labels.NETWORK:$labels.NETWORK.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"service","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"},{"name":"query5","data_source":"logs","search":{"query":"@tenantId:$tenantId.value NOT \"ipset\""},"indexes":["*"],"group_by":[{"facet":"service","limit":25,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"bars"}]},"layout":{"x":0,"y":25,"width":6,"height":7}}],"template_variables":[{"name":"labels.NETWORK","prefix":"@labels.NETWORK","available_values":[],"default":"*"},{"name":"tenantId","prefix":"@tenantId","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"template_variable_presets":[{"name":"LOUD TOP LOGS","template_variables":[{"name":"labels.NETWORK","value":"35Ibwj9d6n"},{"name":"tenantId","value":"leadsquared-prod"}]}],"reflow_type":"fixed","tags":["team:sre"],"pause_auto_refresh":false}
